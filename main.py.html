<html><head>
<title>main.py</title>
<meta name="Generator" content="htmlizer/[Twisted, version 22.10.0]" />
<link rel="alternate" href="main.py" type="text/x-python" />

</head>
<body>
<pre><span class="py-src-variable">import</span> <span class="py-src-variable">falcon</span>.<span class="py-src-variable">asgi</span>, <span class="py-src-variable">socketio</span>, <span class="py-src-variable">uvicorn</span>

<span class="py-src-variable">from</span> <span class="py-src-variable">src</span>.<span class="py-src-variable">middlewares</span>.<span class="py-src-variable">auth</span> <span class="py-src-variable">import</span> <span class="py-src-variable">Auth</span>
<span class="py-src-variable">from</span> <span class="py-src-variable">src</span>.<span class="py-src-variable">middlewares</span>.<span class="py-src-variable">pool</span> <span class="py-src-variable">import</span> <span class="py-src-variable">Pool</span>
<span class="py-src-variable">from</span> <span class="py-src-variable">src</span>.<span class="py-src-variable">socket</span>.<span class="py-src-variable">server</span> <span class="py-src-variable">import</span> <span class="py-src-variable">socket</span>

<span class="py-src-variable">from</span> <span class="py-src-variable">errors</span>.<span class="py-src-variable">storage</span> <span class="py-src-variable">import</span> <span class="py-src-variable">StorageError</span>

<span class="py-src-variable">from</span> <span class="py-src-variable">src</span>.<span class="py-src-variable">controllers</span> <span class="py-src-variable">import</span>  <span class="py-src-variable">users</span>

<span class="py-src-variable">app</span> = <span class="py-src-variable">falcon</span>.<span class="py-src-variable">asgi</span>.<span class="py-src-variable">App</span>(<span class="py-src-variable">middleware</span>=[<span class="py-src-variable">Pool</span>(), <span class="py-src-variable">Auth</span>()])

<span class="py-src-variable">users</span> = <span class="py-src-variable">users</span>.<span class="py-src-variable">UsersResource</span>()

<span class="py-src-variable">app</span>.<span class="py-src-variable">add_route</span>(<span class="py-src-string">&#x27;/users&#x27;</span>, <span class="py-src-variable">users</span>)
<span class="py-src-variable">app</span>.<span class="py-src-variable">add_route</span>(<span class="py-src-string">&#x27;/users/{id}&#x27;</span>, <span class="py-src-variable">users</span>, <span class="py-src-variable">suffix</span>=<span class="py-src-string">&#x27;user&#x27;</span>)

<span class="py-src-variable">app</span>.<span class="py-src-variable">add_error_handler</span>(<span class="py-src-variable">Exception</span>, <span class="py-src-variable">StorageError</span>.<span class="py-src-variable">handle</span>)

<span class="py-src-variable">asgi</span> = <span class="py-src-variable">socketio</span>.<span class="py-src-variable">ASGIApp</span>(<span class="py-src-variable">socket</span>, <span class="py-src-variable">app</span>)

<span class="py-src-variable">uvicorn</span>.<span class="py-src-variable">run</span>(<span class="py-src-variable">asgi</span>)
</pre>
</body>